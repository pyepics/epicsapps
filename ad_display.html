
<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Area Detector Display &#8212; Epics Applications Using PyEpics</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="_static/bizstyle.css?v=5283bb3d" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    
    <script src="_static/documentation_options.js?v=520f5dae"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/bizstyle.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Epics Instruments" href="instruments.html" />
    <link rel="prev" title="Strip Chart Display" href="stripchart.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <!--[if lt IE 9]>
    <script src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head><body>
    <div style="background-color: #E4EAED; text-align: left; padding:
                0px 0px 5px 5px">
      </div>

    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="instruments.html" title="Epics Instruments"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="stripchart.html" title="Strip Chart Display"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">EpicsApps</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Area Detector Display</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="area-detector-display">
<span id="ad-viewer"></span><h1>Area Detector Display<a class="headerlink" href="#area-detector-display" title="Link to this heading">Â¶</a></h1>
<p>Epics Area Detector Display is a wxPython GUI application for viewing
images from an Epics Area Detector.  To run this application, simply
run AD_Display.py at the command line:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">epicsapps</span> <span class="n">adviewer</span>
</pre></div>
</div>
<p>This will start with a file browser to search for an AreaDetector
configuration file, which uses yaml syntax.</p>
<p>A few examples of configuration files are given at
<a class="reference external" href="https://github.com/pyepics/epicsapps/tree/master/examples/areaDetector">https://github.com/pyepics/epicsapps/tree/master/examples/areaDetector</a>, with a sample lookng like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">name</span><span class="p">:</span> <span class="n">IDA</span> <span class="n">Beam</span> <span class="n">Viewer</span>
<span class="n">prefix</span><span class="p">:</span> <span class="s1">&#39;13IDAPG1:&#39;</span>
<span class="n">title</span><span class="p">:</span> <span class="n">AD</span> <span class="n">Display</span> <span class="o">/</span>  <span class="n">IDA</span> <span class="n">Beam</span> <span class="n">Viewer</span>
<span class="n">camera_attributes</span><span class="p">:</span> <span class="p">[</span><span class="n">Acquire</span><span class="p">,</span> <span class="n">ArrayCounter</span><span class="p">,</span> <span class="n">ArrayCounter_RBV</span><span class="p">,</span> <span class="n">NumImages</span><span class="p">,</span> <span class="n">NumImages_RBV</span><span class="p">,</span>
  <span class="n">AcquireTime</span><span class="p">,</span> <span class="n">AcquireTime_RBV</span><span class="p">,</span> <span class="n">TriggerMode</span><span class="p">,</span> <span class="n">TriggerMode_RBV</span><span class="p">]</span>
<span class="n">colormaps</span><span class="p">:</span> <span class="p">[</span><span class="n">gray</span><span class="p">,</span> <span class="n">magma</span><span class="p">,</span> <span class="n">inferno</span><span class="p">,</span> <span class="n">plasma</span><span class="p">,</span> <span class="n">viridis</span><span class="p">,</span> <span class="n">coolwarm</span><span class="p">,</span> <span class="n">hot</span><span class="p">,</span> <span class="n">jet</span><span class="p">]</span>
<span class="n">colormode</span><span class="p">:</span> <span class="n">Mono</span>
<span class="n">default_rotation</span><span class="p">:</span> <span class="mi">0</span>
<span class="n">enabled_plugins</span><span class="p">:</span> <span class="p">[</span><span class="n">image1</span><span class="p">,</span> <span class="n">Over1</span><span class="p">,</span> <span class="n">Over2</span><span class="p">,</span> <span class="n">Over3</span><span class="p">,</span> <span class="n">Over4</span><span class="p">,</span> <span class="n">ROI1</span><span class="p">,</span> <span class="n">ROI2</span><span class="p">,</span> <span class="n">JPEG1</span><span class="p">,</span> <span class="n">TIFF1</span><span class="p">]</span>
<span class="n">epics_controls</span><span class="p">:</span>
<span class="o">-</span> <span class="p">[</span><span class="n">Trigger</span> <span class="n">Mode</span><span class="p">,</span> <span class="s1">&#39;cam1:TriggerMode&#39;</span><span class="p">,</span> <span class="n">true</span><span class="p">,</span> <span class="n">pvenum</span><span class="p">,</span> <span class="n">_RBV</span><span class="p">,</span> <span class="mi">150</span><span class="p">,</span> <span class="mi">10</span><span class="p">]</span>
<span class="o">-</span> <span class="p">[</span><span class="n">Image</span> <span class="n">Mode</span><span class="p">,</span> <span class="s1">&#39;cam1:ImageMode&#39;</span><span class="p">,</span> <span class="n">true</span><span class="p">,</span> <span class="n">pvenum</span><span class="p">,</span> <span class="n">_RBV</span><span class="p">,</span> <span class="mi">150</span><span class="p">,</span> <span class="mi">10</span><span class="p">]</span>
<span class="o">-</span> <span class="p">[</span><span class="s1">&#39;# Images&#39;</span><span class="p">,</span> <span class="s1">&#39;cam1:NumImages&#39;</span><span class="p">,</span> <span class="n">true</span><span class="p">,</span> <span class="n">pvfloat</span><span class="p">,</span> <span class="n">_RBV</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">10</span><span class="p">]</span>
<span class="o">-</span> <span class="p">[</span><span class="n">Acquire</span> <span class="n">Time</span><span class="p">,</span> <span class="s1">&#39;cam1:AcquireTime&#39;</span><span class="p">,</span> <span class="n">true</span><span class="p">,</span> <span class="n">pvfloat</span><span class="p">,</span> <span class="n">_RBV</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">10</span><span class="p">]</span>
<span class="o">-</span> <span class="p">[</span><span class="n">Acquire</span> <span class="n">Period</span><span class="p">,</span> <span class="s1">&#39;cam1:AcquirePeriod&#39;</span><span class="p">,</span> <span class="n">true</span><span class="p">,</span> <span class="n">pvfloat</span><span class="p">,</span> <span class="n">_RBV</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">10</span><span class="p">]</span>
<span class="o">-</span> <span class="p">[</span><span class="n">TIFF</span> <span class="n">File</span> <span class="n">Path</span><span class="p">,</span> <span class="s1">&#39;TIFF1:FilePath&#39;</span><span class="p">,</span> <span class="n">true</span><span class="p">,</span> <span class="n">pvtctrl</span><span class="p">,</span> <span class="n">false</span><span class="p">,</span> <span class="mi">250</span><span class="p">,</span> <span class="mi">10</span><span class="p">]</span>
<span class="o">-</span> <span class="p">[</span><span class="n">Acquire</span> <span class="n">Status</span><span class="p">,</span> <span class="s1">&#39;cam1:Acquire&#39;</span><span class="p">,</span> <span class="n">true</span><span class="p">,</span> <span class="n">pvtext</span><span class="p">,</span> <span class="n">false</span><span class="p">,</span> <span class="mi">250</span><span class="p">,</span> <span class="mi">10</span><span class="p">]</span>
<span class="n">filesaver</span><span class="p">:</span> <span class="s1">&#39;TIFF1:&#39;</span>
<span class="n">free_run_time</span><span class="p">:</span> <span class="mf">0.2</span>
<span class="n">image_attributes</span><span class="p">:</span> <span class="p">[</span><span class="n">ArrayData</span><span class="p">,</span> <span class="n">UniqueId_RBV</span><span class="p">]</span>
<span class="n">show_thumbnail</span><span class="p">:</span> <span class="n">true</span>
<span class="n">thumbnail_size</span><span class="p">:</span> <span class="mi">100</span>
<span class="n">use_filesaver</span><span class="p">:</span> <span class="n">true</span>
<span class="n">workdir</span><span class="p">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">user</span>
<span class="n">scandb_instrument</span><span class="p">:</span> <span class="n">Pinhole</span> <span class="n">Tank</span> <span class="n">BPM</span>
</pre></div>
</div>
<p>This describes how the <cite>adviewer</cite> application will connect to the areaDetector,
including which PVs to include for a very basic widget controls with a limited
set of Process Variables described such as those for starting and stopping the
acquisition.  This configuration file will generate an interface like this:</p>
<img alt="_images/AD_Display.png" src="_images/AD_Display.png" />
<p>Note that the <cite>epics_controls</cite> is a list of data for PVs to be displayed in the
upper left portion of the window.  From the configuration file above,
note:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">epics_controls</span><span class="p">:</span>
<span class="o">-</span> <span class="p">[</span><span class="n">Trigger</span> <span class="n">Mode</span><span class="p">,</span> <span class="s1">&#39;cam1:TriggerMode&#39;</span><span class="p">,</span> <span class="n">true</span><span class="p">,</span> <span class="n">pvenum</span><span class="p">,</span> <span class="n">_RBV</span><span class="p">,</span> <span class="mi">150</span><span class="p">,</span> <span class="mi">10</span><span class="p">]</span>
<span class="o">-</span> <span class="p">[</span><span class="n">Image</span> <span class="n">Mode</span><span class="p">,</span> <span class="s1">&#39;cam1:ImageMode&#39;</span><span class="p">,</span> <span class="n">true</span><span class="p">,</span> <span class="n">pvenum</span><span class="p">,</span> <span class="n">_RBV</span><span class="p">,</span> <span class="mi">150</span><span class="p">,</span> <span class="mi">10</span><span class="p">]</span>
</pre></div>
</div>
<p>Each item in the <cite>epics_controls</cite> list has values of</p>
<blockquote>
<div><ul class="simple">
<li><p>display name, here âTrigger Modeâ</p></li>
<li><p>Epics PV to use, here âcam1:TriggerModeâ</p></li>
<li><p>whether to prepend the AD PV Prefix, here â13IDAPG1:â to the PV name, here âtrueâ.</p></li>
<li><p>what kind of PV it is â enum, float, text, which will determine what type of widget is use, heree âpvenumâ.</p></li>
<li><p>what suffix (if any) to use for a âreadback PVâ, here â_RBVâ, common for many AD PVs</p></li>
<li><p>the size of the widget in pixels, here 150</p></li>
<li><p>the font size for the widget, here 10.</p></li>
</ul>
</div></blockquote>
<p>The areaDetector display will allow changing color table lookup using
a few supplied colortables (from matplotlib) - reversing that color
table is allowded.</p>
<p>Contrast levels can be set using a percentage value to clip the
intensity range. That is, a value of 1 will set the intensity range to
be from the 1%% to 99%% intensity level of the entire image.  This can
be a very useful option for many areaDetectors either with bad pixels
or high dynamic range, as the full scale image is often unusable.</p>
<p>In addition, the display shows a âthumbnail imageâ with an ajustable
size.  At startup, this is centered on the image, but clicking the
mouse on the image will center that portion of the image in the Zoom
box.</p>
<p>Finally, if an Epics ScanDB data is setup with <cite>Instruments</cite> and a
postgresql database, saved positions from one or more instruments can
be included in the display, for example to move a camera or shutter
into saved positions.</p>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="stripchart.html"
                          title="previous chapter">Strip Chart Display</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="instruments.html"
                          title="next chapter">Epics Instruments</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/ad_display.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="instruments.html" title="Epics Instruments"
             >next</a> |</li>
        <li class="right" >
          <a href="stripchart.html" title="Strip Chart Display"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">EpicsApps</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Area Detector Display</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; Copyright 2025, Matthew Newville, The University of Chicago.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.1.3.
    </div>
  </body>
</html>